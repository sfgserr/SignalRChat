(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{22:function(e,t,n){e.exports=n.p+"static/media/search_button.a1ba5b79.png"},23:function(e,t,n){e.exports=n(39)},28:function(e,t,n){},33:function(e,t,n){},34:function(e,t,n){},39:function(e,t,n){"use strict";n.r(t);var a=n(1),o=n.n(a),c=n(20),l=n.n(c);n(28);const r={authority:"https://localhost:7290",client_id:"chat.client",redirect_uri:"http://localhost:3000/signin-oidc",silent_redirect_uri:"http://localhost:3000/silentrenew",post_logout_redirect_uri:"http://localhost:3000/logout",audience:"https://localhost:7290",response_type:"code",automaticSilentRenew:!1,loadUserInfo:!0,scope:"openid profile api1"},s={issuer:"https://localhost:7290",jwks_uri:"https://localhost:7290/.well-known/openid-configuration/jwks",authorization_endpoint:"https://localhost:7290/connect/authorize",token_endpoint:"https://localhost:7290/connect/token",userinfo_endpoint:"https://localhost:7290/connect/userinfo",end_session_endpoint:"https://localhost:7290/connect/endsession",check_session_iframe:"https://localhost:7290/connect/checksession",revocation_endpoint:"https://localhost:7290/connect/revocation",introspection_endpoint:"https://localhost:7290/connect/introspect"};var i=n(10);class h{constructor(){this.signinRedirectCallback=(()=>{this.UserManager.signinRedirectCallback().then(()=>{})}),this.getUser=(async()=>{const e=await this.UserManager.getUser();return e||await this.UserManager.signinRedirectCallback()}),this.parseJwt=(e=>{const t=e.split(".")[1].replace("-","+").replace("_","/");return JSON.parse(window.atob(t))}),this.signinRedirect=(()=>{localStorage.setItem("redirectUri",window.location.pathname),this.UserManager.signinRedirect({})}),this.navigateToScreen=(()=>{window.location.replace("/en/dashboard")}),this.isAuthenticated=(()=>{const e=JSON.parse(sessionStorage.getItem("oidc.user:".concat("https://localhost:7290",":").concat("chat.client")));return!!e&&!!e.access_token}),this.signinSilent=(()=>{this.UserManager.signinSilent().then(e=>{console.log("signed in",e)}).catch(e=>{console.log(e)})}),this.signinSilentCallback=(()=>{this.UserManager.signinSilentCallback()}),this.createSigninRequest=(()=>this.UserManager.createSigninRequest()),this.logout=(()=>{this.UserManager.signoutRedirect({id_token_hint:localStorage.getItem("id_token")}),this.UserManager.clearStaleState()}),this.signoutRedirectCallback=(()=>{this.UserManager.signoutRedirectCallback().then(()=>{localStorage.clear(),window.location.replace(Object({NODE_ENV:"production",PUBLIC_URL:"",REACT_APP_API:"https://localhost:7223",REACT_APP_AUDIENCE:"https://localhost:7290",REACT_APP_AUTHORITY:"https://localhost:7290",REACT_APP_AUTH_URL:"https://localhost:7290",REACT_APP_IDENTITY_CLIENT_ID:"chat.client",REACT_APP_ISSUER:"https://localhost:7290",REACT_APP_LOGOFF_REDIRECT_URL:"http://localhost:3000/logout",REACT_APP_POST_LOGOUT_REDIRECT_URI:"http://localhost:3000/logout/callback",REACT_APP_REDIRECT_URI:"http://localhost:3000/signin-oidc",REACT_APP_REDIRECT_URL:"http://localhost:3000/signin-oidc",REACT_APP_SCOPE:"openid profile api1",REACT_APP_SILENT_REDIRECT_URL:"http://localhost:3000/silentrenew"}).REACT_APP_PUBLIC_URL)}),this.UserManager.clearStaleState()}),this.UserManager=new i.UserManager({...r,userStore:new i.WebStorageStateStore({store:window.sessionStorage}),metadata:{...s}}),i.Log.logger=console,i.Log.level=i.Log.DEBUG,this.UserManager.events.addUserLoaded(e=>{-1!==window.location.href.indexOf("signin-oidc")&&this.navigateToScreen()}),this.UserManager.events.addSilentRenewError(e=>{console.log("silent renew error",e.message)}),this.UserManager.events.addAccessTokenExpired(()=>{console.log("token expired"),this.logout()})}}const d=o.a.createContext({signinRedirectCallback:()=>({}),logout:()=>({}),signoutRedirectCallback:()=>({}),isAuthenticated:()=>({}),signinRedirect:()=>({}),signinSilentCallback:()=>({}),createSigninRequest:()=>({})}),u=d.Consumer;class p extends a.Component{constructor(e){super(e),this.authService=new h}render(){return o.a.createElement(d.Provider,{value:this.authService},this.props.children)}}var g=n(11),m=n(3);const E=e=>{let{component:t,...n}=e;return o.a.createElement(m.a,Object.assign({},n,{render:(e=>t=>o.a.createElement(u,null,n=>{let{isAuthenticated:a,signinRedirect:c}=n;return e&&a()?o.a.createElement(e,t):(c(),o.a.createElement("span",null,"loading"))}))(t)}))};n(33);var _=n(22),R=n.n(_);var C=e=>{let{searchButtonClicked:t}=e;const[n,c]=Object(a.useState)("");return o.a.createElement("div",{className:"search-bar"},o.a.createElement("input",{type:"text",placeholder:"Search...",value:n,onChange:e=>{c(e.target.value)}}),o.a.createElement("button",{onClick:()=>{t(n)}},o.a.createElement("img",{src:R.a,alt:"Search"})))};n(34);const S=n(41).a.create({headers:{"Content-Type":"application/json"},baseURL:"".concat("https://localhost:7223")});S.interceptors.request.use(function(e){const t=JSON.parse(window.sessionStorage.getItem("oidc.user:".concat("https://localhost:7290",":").concat("chat.client")));return t&&t.access_token&&(e.headers.Authorization="Bearer ".concat(t.access_token)),e},function(e){return Promise.reject(e)});var w=S;var U=e=>w.get("/api/Search/FindUsersByName?name=".concat(e));var k=e=>{let{data:t}=e;return o.a.createElement("table",null,o.a.createElement("thead",null,o.a.createElement("tr",null,o.a.createElement("th",null,"Id"),o.a.createElement("th",null,"Name"))),o.a.createElement("tbody",null,t.map((e,t)=>o.a.createElement("tr",{key:t},o.a.createElement("td",null,e.id),o.a.createElement("td",null,e.name)))))};const b=()=>{const[e,t]=Object(a.useState)([]);return o.a.createElement("div",null,o.a.createElement("h1",null,1),o.a.createElement("div",{className:"container"},o.a.createElement(C,{searchButtonClicked:n=>{U(n).then(n=>{let a=JSON.parse(n.data);t(Object.keys(a).map(e=>({name:a[e].name,id:a[e].id}))),console.log(e)}).catch(e=>{console.log(e)})}}),o.a.createElement(k,{data:e})))},A=a.createElement(m.c,null,a.createElement(m.a,{exact:!0,path:"/signin-oidc",component:()=>a.createElement(u,null,e=>{let{signinRedirectCallback:t}=e;return t(),a.createElement("span",null,"loading")})}),a.createElement(m.a,{exact:!0,path:"/logout",component:()=>a.createElement(u,null,e=>{let{logout:t}=e;return t(),a.createElement("span",null,"loading")})}),a.createElement(m.a,{exact:!0,path:"/logout/callback",component:()=>o.a.createElement(u,null,e=>{let{signoutRedirectCallback:t}=e;return t(),o.a.createElement("span",null,"loading")})}),a.createElement(m.a,{exact:!0,path:"/:lng(en|es|de|fr|pt|it)/register/:form?",component:()=>o.a.createElement("div",null,"register")}),a.createElement(m.a,{exact:!0,path:"/silentrenew",component:()=>o.a.createElement(u,null,e=>{let{signinSilentCallback:t}=e;return t(),o.a.createElement("span",null,"loading")})}),a.createElement(E,{path:"/private",component:b}),a.createElement(E,{path:"/dashboard",component:b}),a.createElement(m.a,{path:"/",component:()=>{return o.a.createElement("div",null,"chat.client","Public page")}}));class P extends a.Component{render(){return console.log("chat.client"),o.a.createElement(p,null,o.a.createElement(g.a,{children:A,basename:"/"}))}}Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(o.a.createElement(P,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(e=>{e.unregister()})}},[[23,1,2]]]);
//# sourceMappingURL=main.5460772f.chunk.js.map