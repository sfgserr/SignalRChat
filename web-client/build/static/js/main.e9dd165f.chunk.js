(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{16:function(e,t,n){e.exports=n(27)},21:function(e,t,n){},27:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),o=n(14),l=n.n(o);n(21);const i={authority:"https://chatauth.local",client_id:"chat.client",redirect_uri:"https://chat.local/signin-oidc",silent_redirect_uri:"https://chat.local/silentrenew",post_logout_redirect_uri:"https://chat.local/logout",audience:"https://chatauth.local",response_type:"code",automaticSilentRenew:!1,loadUserInfo:!0,scope:"openid profile messageapi.read messageapi.full_access"},s={issuer:"https://chatauth.local",jwks_uri:"https://chatauth.local/.well-known/openid-configuration/jwks",authorization_endpoint:"https://chatauth.local/connect/authorize",token_endpoint:"https://chatauth.local/connect/token",userinfo_endpoint:"https://chatauth.local/connect/userinfo",end_session_endpoint:"https://chatauth.local/connect/endsession",check_session_iframe:"https://chatauth.local/connect/checksession",revocation_endpoint:"https://chatauth.local/connect/revocation",introspection_endpoint:"https://chatauth.local/connect/introspect"};var r=n(7);class h{constructor(){this.signinRedirectCallback=(()=>{this.UserManager.signinRedirectCallback().then(()=>{})}),this.getUser=(async()=>{const e=await this.UserManager.getUser();return e||await this.UserManager.signinRedirectCallback()}),this.parseJwt=(e=>{const t=e.split(".")[1].replace("-","+").replace("_","/");return JSON.parse(window.atob(t))}),this.signinRedirect=(()=>{localStorage.setItem("redirectUri",window.location.pathname),this.UserManager.signinRedirect({})}),this.navigateToScreen=(()=>{window.location.replace("/en/dashboard")}),this.isAuthenticated=(()=>{const e=JSON.parse(sessionStorage.getItem("oidc.user:".concat("https://chatauth.local",":").concat("chat.client")));return!!e&&!!e.access_token}),this.signinSilent=(()=>{this.UserManager.signinSilent().then(e=>{console.log("signed in",e)}).catch(e=>{console.log(e)})}),this.signinSilentCallback=(()=>{this.UserManager.signinSilentCallback()}),this.createSigninRequest=(()=>this.UserManager.createSigninRequest()),this.logout=(()=>{this.UserManager.signoutRedirect({id_token_hint:localStorage.getItem("id_token")}),this.UserManager.clearStaleState()}),this.signoutRedirectCallback=(()=>{this.UserManager.signoutRedirectCallback().then(()=>{localStorage.clear(),window.location.replace(Object({NODE_ENV:"production",PUBLIC_URL:"",REACT_APP_API:"https://chat.local",REACT_APP_AUDIENCE:"https://chatauth.local",REACT_APP_AUTHORITY:"https://chatauth.local",REACT_APP_AUTH_URL:"https://chatauth.local",REACT_APP_IDENTITY_CLIENT_ID:"chat.client",REACT_APP_ISSUER:"https://chatauth.local",REACT_APP_LOGOFF_REDIRECT_URL:"https://chat.local/logout",REACT_APP_POST_LOGOUT_REDIRECT_URI:"https://chat.local/logout/callback",REACT_APP_REDIRECT_URI:"https://chat.local/signin-oidc",REACT_APP_REDIRECT_URL:"https://chat.local/signin-oidc",REACT_APP_SCOPE:"openid profile messageapi.read messageapi.full_access",REACT_APP_SILENT_REDIRECT_URL:"https://chat.local/silentrenew"}).REACT_APP_PUBLIC_URL)}),this.UserManager.clearStaleState()}),this.UserManager=new r.UserManager({...i,userStore:new r.WebStorageStateStore({store:window.sessionStorage}),metadata:{...s}}),r.Log.logger=console,r.Log.level=r.Log.DEBUG,this.UserManager.events.addUserLoaded(e=>{-1!==window.location.href.indexOf("signin-oidc")&&this.navigateToScreen()}),this.UserManager.events.addSilentRenewError(e=>{console.log("silent renew error",e.message)}),this.UserManager.events.addAccessTokenExpired(()=>{console.log("token expired"),this.logout()})}}const g=c.a.createContext({signinRedirectCallback:()=>({}),logout:()=>({}),signoutRedirectCallback:()=>({}),isAuthenticated:()=>({}),signinRedirect:()=>({}),signinSilentCallback:()=>({}),createSigninRequest:()=>({})}),u=g.Consumer;class d extends a.Component{constructor(e){super(e),this.authService=new h}render(){return c.a.createElement(g.Provider,{value:this.authService},this.props.children)}}var p=n(8),_=n(1);const E=e=>{let{component:t,...n}=e;return c.a.createElement(_.a,Object.assign({},n,{render:(e=>t=>c.a.createElement(u,null,n=>{let{isAuthenticated:a,signinRedirect:o}=n;return e&&a()?c.a.createElement(e,t):(o(),c.a.createElement("span",null,"loading"))}))(t)}))},m=()=>c.a.createElement("div",null,"Private page"),R=a.createElement(_.c,null,a.createElement(_.a,{exact:!0,path:"/signin-oidc",component:()=>a.createElement(u,null,e=>{let{signinRedirectCallback:t}=e;return t(),a.createElement("span",null,"loading")})}),a.createElement(_.a,{exact:!0,path:"/logout",component:()=>a.createElement(u,null,e=>{let{logout:t}=e;return t(),a.createElement("span",null,"loading")})}),a.createElement(_.a,{exact:!0,path:"/logout/callback",component:()=>c.a.createElement(u,null,e=>{let{signoutRedirectCallback:t}=e;return t(),c.a.createElement("span",null,"loading")})}),a.createElement(_.a,{exact:!0,path:"/:lng(en|es|de|fr|pt|it)/register/:form?",component:()=>c.a.createElement("div",null,"register")}),a.createElement(_.a,{exact:!0,path:"/silentrenew",component:()=>c.a.createElement(u,null,e=>{let{signinSilentCallback:t}=e;return t(),c.a.createElement("span",null,"loading")})}),a.createElement(E,{path:"/private",component:m}),a.createElement(E,{path:"/dashboard",component:m}),a.createElement(_.a,{path:"/",component:()=>{return c.a.createElement("div",null,"chat.client","Public page")}}));class w extends a.Component{render(){return console.log("chat.client"),c.a.createElement(d,null,c.a.createElement(p.a,{children:R,basename:"/"}))}}Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(c.a.createElement(w,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(e=>{e.unregister()})}},[[16,1,2]]]);
//# sourceMappingURL=main.e9dd165f.chunk.js.map